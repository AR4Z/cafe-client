{"remainingRequest":"/home/ar4z/Projects/cafe-ui/node_modules/babel-loader/lib/index.js!/home/ar4z/Projects/cafe-ui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/ar4z/Projects/cafe-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ar4z/Projects/cafe-ui/src/views/StaffAssignment.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ar4z/Projects/cafe-ui/src/views/StaffAssignment.vue","mtime":1557005176883},{"path":"/home/ar4z/Projects/cafe-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ar4z/Projects/cafe-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/ar4z/Projects/cafe-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ar4z/Projects/cafe-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport ShowAssignment from \"../components/ShowAssignment.vue\";\nexport default {\n  name: \"StaffAssignment\",\n  components: {\n    ShowAssignment: ShowAssignment\n  },\n  data: function data() {\n    return {\n      recolectores: [{\n        id: 0,\n        num: 1,\n        rendimiento: \"\",\n        group: false\n      }],\n      lotes: [{\n        id: 0,\n        kg: \"\",\n        pendiente: \"\"\n      }],\n      result: [],\n      message: \"\",\n      showError: false,\n      showResult: false,\n      token: \"\",\n      refreshId: \"\",\n      waiting: false,\n      e1: 1\n    };\n  },\n  methods: {\n    addRecolector: function addRecolector() {\n      this.recolectores.push({\n        id: this.recolectores[this.recolectores.length - 1].id + 1,\n        num: 1,\n        rendimiento: \"\",\n        group: false\n      });\n    },\n    deleteRecolector: function deleteRecolector(id) {\n      this.recolectores = this.recolectores.filter(function (item) {\n        return item.id != id;\n      });\n    },\n    addLote: function addLote() {\n      this.lotes.push({\n        id: this.lotes[this.lotes.length - 1].id + 1,\n        kg: \"\",\n        pendiente: \"\"\n      });\n    },\n    deleteLote: function deleteLote(id) {\n      this.lotes = this.lotes.filter(function (item) {\n        return item.id !== id;\n      });\n    },\n    calcular: function calcular() {\n      var _this = this;\n\n      this.$validator.validate().then(function (valid) {\n        if (valid) {\n          var rendimientos = [];\n          var pendientes = [];\n          var kgs = [];\n\n          for (var n_recolector = 0; n_recolector < _this.recolectores.length; n_recolector++) {\n            var recolector = _this.recolectores[n_recolector];\n\n            for (var i = 0; i < recolector.num; i++) {\n              rendimientos.push(Number(recolector.rendimiento));\n            }\n          }\n\n          for (var n_lote = 0; n_lote < _this.lotes.length; n_lote++) {\n            var lote = _this.lotes[n_lote];\n            pendientes.push(lote.pendiente);\n            kgs.push(lote.kg);\n          }\n\n          _this.axios.post(\"http://gaia.manizales.unal.edu.co:3200/v1/schedule\", {\n            rendimientos: rendimientos,\n            pendientes: pendientes,\n            kgs: kgs\n          }).then(function (res) {\n            _this.token = res.data.id_scheduler;\n            _this.waiting = true;\n            _this.refreshId = setInterval(function () {\n              _this.checkScheduleStatus();\n            }, 1000);\n          }).catch(function (err) {\n            console.error(err);\n          });\n        } else {\n          _this.e1 = 1;\n        }\n      });\n    },\n    checkScheduleStatus: function checkScheduleStatus() {\n      var _this2 = this;\n\n      this.axios.get(\"http://gaia.manizales.unal.edu.co:3200/v1/schedule/\".concat(this.token)).then(function (res) {\n        if (res.data.status == \"SUCCESS\") {\n          clearInterval(_this2.refreshId);\n\n          if (res.data.schedule) {\n            _this2.result = res.data.schedule;\n            _this2.showResult = true;\n          } else {\n            _this2.message = res.data.message;\n            _this2.showError = true;\n          }\n\n          _this2.waiting = false;\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["StaffAssignment.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <v-container grid-list-md text-xs-center>\n    <v-layout row wrap>\n      <v-flex xs12 v-if=\"showResult\">\n        <v-card-title>\n          <span class=\"title\">Asignación de recolectores para cosechado de café</span>\n        </v-card-title>\n        <v-container>\n          <show-assignment v-bind:recolectores=\"result\"/>\n        </v-container>\n      </v-flex>\n\n      <v-flex xs12 v-if=\"true\">\n        <v-container>\n          <v-alert :value=\"true\" color=\"error\" icon=\"warning\" outline>{{ message }}</v-alert>\n        </v-container>\n      </v-flex>\n      <v-flex v-if=\"waiting\">\n        <v-progress-circular :size=\"70\" :width=\"7\" color=\"purple\" indeterminate></v-progress-circular>\n        <h1>Esto puede tomar unos minutos</h1>\n      </v-flex>\n      <v-flex xs12 v-if=\"!(showResult || waiting)\">\n        <v-stepper v-model=\"e1\">\n          <v-stepper-header>\n            <v-stepper-step :complete=\"e1 > 1\" step=\"1\">Información de lotes</v-stepper-step>\n            <v-divider></v-divider>\n            <v-stepper-step :complete=\"e1 > 2\" step=\"2\">Información de recolectores</v-stepper-step>\n          </v-stepper-header>\n          <v-stepper-items>\n            <v-stepper-content step=\"1\">\n              <v-card class=\"mb-5\">\n                <v-form>\n                  <v-container>\n                    <h2>Información de lotes</h2>\n                    <div v-for=\"lote in lotes\" :key=\"'lote'+lote.id\">\n                      <v-layout\n                        :column=\"$vuetify.breakpoint.mdAndDown\"\n                        :row=\"!$vuetify.breakpoint.mdAndDown\"\n                      >\n                        <v-flex xs12 md4>\n                          <v-text-field\n                            label=\"Kg de café\"\n                            v-model=\"lote.kg\"\n                            v-validate.initi=\"'numeric|required'\"\n                            data-vv-as=\"Kg de café\"\n                            :name=\"'lote'+lote.id\"\n                            :error-messages=\"errors.collect('lote'+lote.id)\"\n                            required\n                          ></v-text-field>\n                        </v-flex>\n                        <v-flex xs12 md4>\n                          <v-radio-group\n                            label=\"Pendiente de inclinación\"\n                            v-validate=\"'required'\"\n                            :name=\"'pendiente'+lote.id\"\n                            data-vv-as=\"Pendiente\"\n                            v-model=\"lote.pendiente\"\n                            :error-messages=\"errors.collect('pendiente'+lote.id)\"\n                          >\n                            <v-radio label=\"mayor al 200%\" :value=\"2\"></v-radio>\n                            <v-radio label=\"101% - 200%\" :value=\"1\"></v-radio>\n                            <v-radio label=\"20% - 100%\" :value=\"0\"></v-radio>\n                          </v-radio-group>\n                        </v-flex>\n\n                        <v-flex xs12 md3 v-if=\"lote.id != 0\">\n                          <v-btn color=\"error\" v-on:click.native=\"() => deleteLote(lote.id)\">\n                            <v-icon>delete</v-icon>\n                          </v-btn>\n                        </v-flex>\n                      </v-layout>\n                    </div>\n                    <v-layout>\n                      <v-flex xs12 md3>\n                        <v-btn color=\"warning\" v-on:click.native=\"addLote\">\n                          Añadir Lote\n                          <v-icon dark right>add</v-icon>\n                        </v-btn>\n                      </v-flex>\n                    </v-layout>\n                  </v-container>\n                </v-form>\n              </v-card>\n\n              <v-btn color=\"primary\" @click=\"e1 = 2\">Siguiente</v-btn>\n            </v-stepper-content>\n\n            <v-stepper-content step=\"2\">\n              <v-card class=\"mb-5\">\n                <v-form>\n                  <v-container>\n                    <h2>Información de recolectores</h2>\n                    <div v-for=\"recolector in recolectores\" :key=\"'recolector'+recolector.id\">\n                      <v-layout row wrap>\n                        <v-flex xs12 md3>\n                          <v-text-field\n                            v-validate=\"'numeric|required'\"\n                            label=\"Numero de recolectores\"\n                            :name=\"`recolectores${recolector.id}`\"\n                            :error-messages=\"errors.collect(`recolectores${recolector.id}`)\"\n                            v-model=\"recolector.num\"\n                            :disabled=\"!recolector.group\"\n                            required\n                          ></v-text-field>\n                        </v-flex>\n                        <v-flex xs12 md4>\n                          <v-radio-group\n                            label=\"Rendimiento\"\n                            v-validate=\"'required'\"\n                            :name=\"`rendimiento${recolector.id}`\"\n                            data-vv-as=\"Rendimiento\"\n                            v-model=\"recolector.rendimiento\"\n                            :error-messages=\"errors.collect(`rendimiento${recolector.id}`)\"\n                          >\n                            <v-radio label=\"Alto rendimiento\" :value=\"2\"></v-radio>\n                            <v-radio label=\"Medio rendimiento\" :value=\"1\"></v-radio>\n                            <v-radio label=\"Bajo rendimiento\" :value=\"0\"></v-radio>\n                          </v-radio-group>\n                        </v-flex>\n\n                        <v-flex xs12 md2>\n                          <v-switch v-model=\"recolector.group\" label=\"Grupo\"></v-switch>\n                        </v-flex>\n\n                        <v-flex xs12 md3 v-if=\"recolector.id != 0\">\n                          <v-btn\n                            color=\"error\"\n                            v-on:click.native=\"() => deleteRecolector(recolector.id)\"\n                          >\n                            <v-icon>delete</v-icon>\n                          </v-btn>\n                        </v-flex>\n                      </v-layout>\n                    </div>\n                    <v-layout row wrap>\n                      <v-flex xs12 md3>\n                        <v-btn color=\"warning\" v-on:click.native=\"addRecolector\">\n                          Añadir recolector\n                          <v-icon dark right>add</v-icon>\n                        </v-btn>\n                      </v-flex>\n                    </v-layout>\n                  </v-container>\n                </v-form>\n              </v-card>\n              <v-btn color=\"primary\" @click=\"e1 = 1\">Atras</v-btn>\n              <v-btn color=\"success\" v-on:click.native=\"calcular\">Calcular</v-btn>\n            </v-stepper-content>\n          </v-stepper-items>\n        </v-stepper>\n      </v-flex>\n    </v-layout>\n  </v-container>\n</template>\n<script>\nimport ShowAssignment from \"../components/ShowAssignment.vue\";\n\nexport default {\n  name: \"StaffAssignment\",\n  components: {\n    ShowAssignment\n  },\n  data() {\n    return {\n      recolectores: [\n        {\n          id: 0,\n          num: 1,\n          rendimiento: \"\",\n          group: false\n        }\n      ],\n      lotes: [\n        {\n          id: 0,\n          kg: \"\",\n          pendiente: \"\"\n        }\n      ],\n      result: [],\n      message: \"\",\n      showError: false,\n      showResult: false,\n      token: \"\",\n      refreshId: \"\",\n      waiting: false,\n      e1: 1\n    };\n  },\n  methods: {\n    addRecolector() {\n      this.recolectores.push({\n        id: this.recolectores[this.recolectores.length - 1].id + 1,\n        num: 1,\n        rendimiento: \"\",\n        group: false\n      });\n    },\n    deleteRecolector(id) {\n      this.recolectores = this.recolectores.filter(item => item.id != id);\n    },\n    addLote() {\n      this.lotes.push({\n        id: this.lotes[this.lotes.length - 1].id + 1,\n        kg: \"\",\n        pendiente: \"\"\n      });\n    },\n    deleteLote(id) {\n      this.lotes = this.lotes.filter(item => item.id !== id);\n    },\n    calcular() {\n      this.$validator.validate().then(valid => {\n        if (valid) {\n          const rendimientos = [];\n          const pendientes = [];\n          const kgs = [];\n\n          for (\n            let n_recolector = 0;\n            n_recolector < this.recolectores.length;\n            n_recolector++\n          ) {\n            const recolector = this.recolectores[n_recolector];\n\n            for (let i = 0; i < recolector.num; i++) {\n              rendimientos.push(Number(recolector.rendimiento));\n            }\n          }\n\n          for (let n_lote = 0; n_lote < this.lotes.length; n_lote++) {\n            const lote = this.lotes[n_lote];\n            pendientes.push(lote.pendiente);\n            kgs.push(lote.kg);\n          }\n          this.axios\n            .post(\"http://gaia.manizales.unal.edu.co:3200/v1/schedule\", {\n              rendimientos: rendimientos,\n              pendientes: pendientes,\n              kgs: kgs\n            })\n            .then(res => {\n              this.token = res.data.id_scheduler;\n              this.waiting = true;\n              this.refreshId = setInterval(() => {\n                this.checkScheduleStatus();\n              }, 1000);\n            })\n            .catch(err => {\n              console.error(err);\n            });\n        } else {\n          this.e1 = 1;\n        }\n      });\n    },\n    checkScheduleStatus() {\n      this.axios\n        .get(`http://gaia.manizales.unal.edu.co:3200/v1/schedule/${this.token}`)\n        .then(res => {\n          if (res.data.status == \"SUCCESS\") {\n            clearInterval(this.refreshId);\n            if (res.data.schedule) {\n              this.result = res.data.schedule;\n              this.showResult = true;\n            } else {\n              this.message = res.data.message;\n              this.showError = true;\n            }\n            this.waiting = false;\n          }\n        });\n    }\n  }\n};\n</script>\n"],"sourceRoot":"src/views"}]}